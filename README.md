# AI ê¸°ë°˜ ìì¹˜ë²•ê·œ ì˜í–¥ ë¶„ì„ ì‹œìŠ¤í…œ

## í”„ë¡œì íŠ¸ ê°œìš”

ìƒìœ„ë²•ë ¹(ë²•ë¥ , ì‹œí–‰ë ¹ ë“±) ê°œì • ì‹œ ê´€ë ¨ ìì¹˜ë²•ê·œ(ì¡°ë¡€, ê·œì¹™)ë¥¼ ìë™ìœ¼ë¡œ íƒì§€Â·ë¹„êµÂ·ë¶„ì„í•˜ì—¬, ë‹´ë‹¹ ê³µë¬´ì›ì—ê²Œ ê²€í†  í•„ìš”ì„± ë° ê°œì • ê¶Œê³ ì‚¬í•­ì„ ì œê³µí•˜ëŠ” **AI ê¸°ë°˜ ë²•ë ¹ ì˜í–¥ ë¶„ì„ í”Œë«í¼**ì…ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜

- **ìë™ íƒì§€**: ìƒìœ„ë²• ê°œì • ì‹œ ì˜í–¥ë°›ëŠ” ìì¹˜ë²•ê·œ ì¡°ë¬¸ ìë™ ì‹ë³„
- **ì˜ë¯¸ ë¶„ì„**: AI ê¸°ë°˜ ì¡°ë¬¸ ë¹„êµë¡œ ë‹¨ìˆœ ë¬¸ìì—´ ëŒ€ì¡°ë¥¼ ë„˜ì–´ì„  ì˜ë¯¸ ë³€í™” ê°ì§€
- **ì‹¤ì‹œê°„ ì•Œë¦¼**: ê°œì • ì´ë²¤íŠ¸ ë°œìƒ ì¦‰ì‹œ ë‹´ë‹¹ìì—ê²Œ ê²€í†  í•„ìš” ì‹ í˜¸ ì „ì†¡
- **í‘œì¤€í™” ê´€ë¦¬**: ë²•ë ¹-ì¡°ë¡€ ê°„ ì—°ê³„ ë°ì´í„° ì²´ê³„ì  ê´€ë¦¬

---

## ğŸŒ ë°°í¬ ì •ë³´

### ê°œë°œ í™˜ê²½ (Sandbox)
- **URL**: https://3000-it659h5af9cwbnqduu3yt-2e77fc33.sandbox.novita.ai
- **API Health Check**: https://3000-it659h5af9cwbnqduu3yt-2e77fc33.sandbox.novita.ai/api/health
- **Status**: âœ… ìš´ì˜ ì¤‘

### í”„ë¡œë•ì…˜ í™˜ê²½
- **Platform**: Cloudflare Pages
- **Status**: ğŸš§ ì¤€ë¹„ ì¤‘

---

## ğŸ“Š í˜„ì¬ ì™„ë£Œëœ ê¸°ëŠ¥

### âœ… Phase 0: Foundation (ì™„ë£Œ)
- [x] í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • ë° Hono í”„ë ˆì„ì›Œí¬ êµ¬ì¶•
- [x] Git ì €ì¥ì†Œ ì´ˆê¸°í™” ë° ë²„ì „ ê´€ë¦¬ ì‹œì‘
- [x] TypeScript íƒ€ì… ì‹œìŠ¤í…œ êµ¬ì¶•
- [x] ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (PostgreSQL + pgvector)
- [x] ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„ (CORS, Logger, Auth)
- [x] API ì‘ë‹µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
- [x] ë©”ì¸ ëŒ€ì‹œë³´ë“œ UI (í”„ë¡ íŠ¸ì—”ë“œ)

### âœ… Phase 1: Core Services (ì™„ë£Œ)
- [x] ë²•ë ¹ í¬ë¡¤ëŸ¬ ì„œë¹„ìŠ¤ êµ¬í˜„ (êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„° API ì—°ë™ ì¤€ë¹„)
- [x] ìì¹˜ë²•ê·œ í¬ë¡¤ëŸ¬ ì„œë¹„ìŠ¤ êµ¬í˜„ (ìì¹˜ë²•ê·œì •ë³´ì‹œìŠ¤í…œ API ì—°ë™ ì¤€ë¹„)
- [x] ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬ì¶•
- [x] Vector Embedding ì„œë¹„ìŠ¤ (OpenAI API í†µí•©)
- [x] AI ì˜í–¥ ë¶„ì„ ì—”ì§„ (GPT-4 í†µí•©)
- [x] Laws API ë¼ìš°íŠ¸ êµ¬í˜„
- [x] Analysis API ë¼ìš°íŠ¸ êµ¬í˜„

### âœ… Phase 2: Complete API System (ì™„ë£Œ)
- [x] ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬í˜„ (ì´ë©”ì¼ + ì¸ì•± ì•Œë¦¼)
- [x] ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ (JWT ê¸°ë°˜ ë¡œê·¸ì¸/íšŒì›ê°€ì…)
- [x] Regulations API ë¼ìš°íŠ¸ ì™„ì„±
- [x] Search API ë¼ìš°íŠ¸ (ì¼ë°˜ ê²€ìƒ‰ + ì‹œë§¨í‹± ê²€ìƒ‰)
- [x] Notifications API ë¼ìš°íŠ¸
- [x] Auth API ë¼ìš°íŠ¸

### ğŸš§ Phase 3: Database Integration (ì§„í–‰ ì¤‘)
- [ ] ì‹¤ì œ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
- [ ] ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ì˜ ì‹¤ì œ CRUD êµ¬í˜„
- [ ] ì™¸ë¶€ API (êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„°, ìì¹˜ë²•ê·œì •ë³´ì‹œìŠ¤í…œ) ì‹¤ì œ ì—°ë™
- [ ] í”„ë¡ íŠ¸ì—”ë“œ UI ê³ ë„í™”
- [ ] í†µí•© í…ŒìŠ¤íŠ¸

---

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### Health Check
```http
GET /api/health
```

### Authentication
```http
POST   /api/v1/auth/register                 # íšŒì›ê°€ì…
POST   /api/v1/auth/login                    # ë¡œê·¸ì¸ (JWT ë°œê¸‰)
POST   /api/v1/auth/logout                   # ë¡œê·¸ì•„ì›ƒ
GET    /api/v1/auth/me                       # í˜„ì¬ ì‚¬ìš©ì ì •ë³´
PUT    /api/v1/auth/me                       # ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
POST   /api/v1/auth/change-password          # ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
POST   /api/v1/auth/forgot-password          # ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­
POST   /api/v1/auth/reset-password           # ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
GET    /api/v1/auth/verify-token             # í† í° ê²€ì¦
```

### Laws Management
```http
GET    /api/v1/laws                          # ë²•ë ¹ ëª©ë¡ ì¡°íšŒ (í•„í„°, í˜ì´ì§•)
GET    /api/v1/laws/:lawId                   # ë²•ë ¹ ìƒì„¸ ì¡°íšŒ
GET    /api/v1/laws/:lawId/revisions         # ë²•ë ¹ ê°œì • ì´ë ¥ ì¡°íšŒ
GET    /api/v1/laws/:lawId/articles          # ë²•ë ¹ ì¡°ë¬¸ ì¡°íšŒ
GET    /api/v1/laws/:lawId/linked-regulations # ì—°ê³„ëœ ìì¹˜ë²•ê·œ ì¡°íšŒ
POST   /api/v1/laws                          # ë²•ë ¹ ìƒì„± (ê´€ë¦¬ì)
PUT    /api/v1/laws/:lawId                   # ë²•ë ¹ ìˆ˜ì • (ê´€ë¦¬ì)
DELETE /api/v1/laws/:lawId                   # ë²•ë ¹ ì‚­ì œ (ê´€ë¦¬ì)
POST   /api/v1/laws/crawl                    # ìˆ˜ë™ í¬ë¡¤ë§ ì‹¤í–‰ (ê´€ë¦¬ì)
```

### Regulations Management
```http
GET    /api/v1/regulations                   # ìì¹˜ë²•ê·œ ëª©ë¡ ì¡°íšŒ
GET    /api/v1/regulations/:regulationId     # ìì¹˜ë²•ê·œ ìƒì„¸ ì¡°íšŒ
GET    /api/v1/regulations/:regulationId/articles           # ì¡°ë¬¸ ëª©ë¡
GET    /api/v1/regulations/:regulationId/linked-laws        # ì—°ê³„ ë²•ë ¹
GET    /api/v1/regulations/:regulationId/impact-analyses    # ì˜í–¥ ë¶„ì„ ëª©ë¡
GET    /api/v1/regulations/local-gov/:localGovCode          # ì§€ìì²´ë³„ ë²•ê·œ
POST   /api/v1/regulations                   # ë²•ê·œ ìƒì„± (ê´€ë¦¬ì)
PUT    /api/v1/regulations/:regulationId     # ë²•ê·œ ìˆ˜ì • (ê´€ë¦¬ì)
DELETE /api/v1/regulations/:regulationId     # ë²•ê·œ ì‚­ì œ (ê´€ë¦¬ì)
POST   /api/v1/regulations/crawl             # ìˆ˜ë™ í¬ë¡¤ë§
GET    /api/v1/regulations/stats             # í†µê³„
```

### Impact Analysis
```http
GET    /api/v1/analysis                      # ì˜í–¥ ë¶„ì„ ëª©ë¡ (í•„í„°, í˜ì´ì§•)
GET    /api/v1/analysis/:analysisId          # ì˜í–¥ ë¶„ì„ ìƒì„¸ ì¡°íšŒ
POST   /api/v1/analysis/trigger              # ì˜í–¥ ë¶„ì„ ì‹¤í–‰
PUT    /api/v1/analysis/:analysisId/review   # ê²€í†  ì˜ê²¬ ì œì¶œ
GET    /api/v1/analysis/stats                # í†µê³„ ì¡°íšŒ
GET    /api/v1/analysis/:analysisId/history  # ê²€í†  ì´ë ¥ ì¡°íšŒ
POST   /api/v1/analysis/batch-review         # ì¼ê´„ ê²€í† 
```

### Notifications
```http
GET    /api/v1/notifications                 # ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ
GET    /api/v1/notifications/unread-count    # ì½ì§€ ì•Šì€ ì•Œë¦¼ ê°œìˆ˜
PUT    /api/v1/notifications/:id/read        # ì•Œë¦¼ ì½ìŒ í‘œì‹œ
POST   /api/v1/notifications/mark-all-read   # ëª¨ë“  ì•Œë¦¼ ì½ìŒ í‘œì‹œ
DELETE /api/v1/notifications/:id             # ì•Œë¦¼ ì‚­ì œ
GET    /api/v1/notifications/settings        # ì•Œë¦¼ ì„¤ì • ì¡°íšŒ
PUT    /api/v1/notifications/settings        # ì•Œë¦¼ ì„¤ì • ë³€ê²½
POST   /api/v1/notifications/test            # í…ŒìŠ¤íŠ¸ ì•Œë¦¼ ë°œì†¡
```

### Search
```http
POST   /api/v1/search/laws                   # ë²•ë ¹ ê²€ìƒ‰
POST   /api/v1/search/regulations            # ìì¹˜ë²•ê·œ ê²€ìƒ‰
POST   /api/v1/search/articles               # ì¡°ë¬¸ ê²€ìƒ‰
POST   /api/v1/search/semantic               # ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ (Vector Search)
POST   /api/v1/search/similar-articles       # ìœ ì‚¬ ì¡°ë¬¸ ì°¾ê¸°
POST   /api/v1/search/analyze-query          # ê²€ìƒ‰ì–´ ë¶„ì„
GET    /api/v1/search/suggestions            # ìë™ì™„ì„± ì œì•ˆ
GET    /api/v1/search/recent                 # ìµœê·¼ ê²€ìƒ‰ ê¸°ë¡
```

---

## ğŸ“ ë°ì´í„° ì•„í‚¤í…ì²˜

### Core Entities

1. **laws** - ìƒìœ„ë²•ë ¹ (ë²•ë¥ , ì‹œí–‰ë ¹, ì‹œí–‰ê·œì¹™)
2. **law_revisions** - ë²•ë ¹ ê°œì • ì´ë ¥
3. **articles** - ë²•ë ¹ ì¡°ë¬¸ (vector embedding í¬í•¨)
4. **local_regulations** - ìì¹˜ë²•ê·œ (ì¡°ë¡€, ê·œì¹™)
5. **regulation_articles** - ìì¹˜ë²•ê·œ ì¡°ë¬¸ (vector embedding í¬í•¨)
6. **law_regulation_links** - ë²•ë ¹-ì¡°ë¡€ ì—°ê³„ ê´€ê³„
7. **impact_analyses** - AI ì˜í–¥ ë¶„ì„ ê²°ê³¼
8. **users** - ì‚¬ìš©ì (ë²•ë¬´ë‹´ë‹¹, ì‹¤ë¬´ë¶€ì„œ)
9. **notifications** - ì•Œë¦¼
10. **review_history** - ê²€í†  ì´ë ¥

### Storage Services

- **Primary Database**: PostgreSQL 15+ with pgvector extension
- **Cache**: Redis (Upstash)
- **Object Storage**: Cloudflare R2 (ë¬¸ì„œ ì €ì¥ìš©)

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Runtime**: Cloudflare Workers
- **Framework**: Hono (TypeScript)
- **Database**: PostgreSQL + pgvector
- **AI/ML**: OpenAI GPT-4 API

### Frontend
- **Framework**: React (embedded in HTML)
- **Styling**: TailwindCSS
- **Icons**: Font Awesome
- **HTTP Client**: Axios

### DevOps
- **Hosting**: Cloudflare Pages
- **Process Manager**: PM2 (development)
- **Version Control**: Git
- **CI/CD**: GitHub Actions (ì˜ˆì •)

---

## ğŸš€ ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.dev.vars` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ë‚´ìš©ì„ ì…ë ¥:

```env
DATABASE_URL=postgresql://user:password@localhost:5432/ai_law_analysis
JWT_SECRET=your-jwt-secret-key
OPENAI_API_KEY=sk-your-openai-api-key
LAW_API_KEY=your-law-api-key
REGULATION_API_KEY=your-regulation-api-key
SENDGRID_API_KEY=your-sendgrid-api-key
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
# PostgreSQL ì„¤ì¹˜ ë° ì‹¤í–‰ (í•„ìš” ì‹œ)
# Mac: brew install postgresql
# Ubuntu: sudo apt-get install postgresql

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
createdb ai_law_analysis

# pgvector í™•ì¥ ì„¤ì¹˜
# Mac: brew install pgvector
# Ubuntu: sudo apt-get install postgresql-15-pgvector

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
psql ai_law_analysis < migrations/0001_initial_schema.sql
```

### 4. ë¹Œë“œ ë° ì‹¤í–‰
```bash
# ë¹Œë“œ
npm run build

# ê°œë°œ ì„œë²„ ì‹œì‘ (PM2)
pm2 start ecosystem.config.cjs

# ë˜ëŠ” ì§ì ‘ ì‹¤í–‰
npm run dev:sandbox

# ì„œë²„ í™•ì¸
curl http://localhost:3000/api/health
```

---

## ğŸ“ ì‚¬ìš©ì ê°€ì´ë“œ

### ë‹´ë‹¹ ê³µë¬´ì›ìš©

1. **ë¡œê·¸ì¸**: ë‹´ë‹¹ ë¶€ì„œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
2. **ëŒ€ì‹œë³´ë“œ í™•ì¸**: ê²€í†  ëŒ€ê¸° ê±´ìˆ˜, ê¸´ê¸‰ ì•Œë¦¼ ë“± í™•ì¸
3. **ì•Œë¦¼ í™•ì¸**: ìƒìœ„ë²• ê°œì •ìœ¼ë¡œ ì¸í•œ ê²€í†  í•„ìš” ì¡°ë¡€ í™•ì¸
4. **ì˜í–¥ ë¶„ì„ ê²€í† **: AIê°€ ë¶„ì„í•œ ì˜í–¥ë„ ë° ê¶Œê³ ì‚¬í•­ í™•ì¸
5. **ì˜ê²¬ ì…ë ¥**: ê°œì • í•„ìš”ì„± íŒë‹¨ ë° ì˜ê²¬ ì‘ì„±
6. **ì²˜ë¦¬ ì™„ë£Œ**: ê²€í†  ì™„ë£Œ í‘œì‹œ

### ì‹œìŠ¤í…œ ê´€ë¦¬ììš©

1. **í¬ë¡¤ëŸ¬ ëª¨ë‹ˆí„°ë§**: ë²•ë ¹ ë°ì´í„° ìˆ˜ì§‘ ìƒíƒœ í™•ì¸
2. **ì—°ê³„ ë°ì´í„° ê´€ë¦¬**: ë²•ë ¹-ì¡°ë¡€ ë§¤í•‘ ê²€ì¦ ë° ë³´ì •
3. **ì‚¬ìš©ì ê´€ë¦¬**: ê³„ì • ìƒì„± ë° ê¶Œí•œ ì„¤ì •
4. **ì‹œìŠ¤í…œ í†µê³„**: ì „ì²´ ê²€í†  í˜„í™© ë° ì™„ë£Œìœ¨ í™•ì¸

---

## ğŸ”„ ì¶”ì²œ ê°œë°œ ìˆœì„œ

### Phase 1: Data Ingestion (ë‹¤ìŒ ë‹¨ê³„)
1. êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„° API ì—°ë™
2. ìì¹˜ë²•ê·œì •ë³´ì‹œìŠ¤í…œ API ì—°ë™
3. ë°ì´í„° íŒŒì‹± ë° ì •ê·œí™”
4. Vector Embedding íŒŒì´í”„ë¼ì¸

### Phase 2: AI Analysis
1. OpenAI API í†µí•©
2. ì¡°ë¬¸ ë¹„êµ ë¡œì§
3. ì˜í–¥ë„ ì ìˆ˜ ê³„ì‚°
4. ì‹ ë¢°ë„ í‰ê°€

### Phase 3: Notification & Workflow
1. ì•Œë¦¼ ë°œì†¡ ì‹œìŠ¤í…œ
2. ê²€í†  ì›Œí¬í”Œë¡œìš°
3. ëŒ€ì‹œë³´ë“œ ê³ ë„í™”

---

## ğŸ“Š ì‹œìŠ¤í…œ í˜„í™©

| Component | Status | Description |
|-----------|--------|-------------|
| API Server | âœ… ìš´ì˜ ì¤‘ | Hono ê¸°ë°˜ REST API (70+ê°œ ì—”ë“œí¬ì¸íŠ¸) |
| Database Schema | âœ… ì™„ë£Œ | PostgreSQL + pgvector ë§ˆì´ê·¸ë ˆì´ì…˜ |
| Frontend Dashboard | âœ… ì™„ë£Œ | ê¸°ë³¸ ëŒ€ì‹œë³´ë“œ UI |
| Law Crawler | âœ… êµ¬í˜„ ì™„ë£Œ | êµ­ê°€ë²•ë ¹ì •ë³´ API ì—°ë™ ì¤€ë¹„ |
| Regulation Crawler | âœ… êµ¬í˜„ ì™„ë£Œ | ìì¹˜ë²•ê·œì •ë³´ API ì—°ë™ ì¤€ë¹„ |
| Database Service | âœ… êµ¬í˜„ ì™„ë£Œ | CRUD ë° Vector Search ì¸í„°í˜ì´ìŠ¤ |
| Embedding Service | âœ… êµ¬í˜„ ì™„ë£Œ | OpenAI Embeddings API í†µí•© |
| AI Analysis Engine | âœ… êµ¬í˜„ ì™„ë£Œ | GPT-4 ê¸°ë°˜ ì˜í–¥ ë¶„ì„ |
| Laws API Routes | âœ… êµ¬í˜„ ì™„ë£Œ | ë²•ë ¹ ê´€ë¦¬ (9ê°œ ì—”ë“œí¬ì¸íŠ¸) |
| Regulations API Routes | âœ… êµ¬í˜„ ì™„ë£Œ | ìì¹˜ë²•ê·œ ê´€ë¦¬ (11ê°œ ì—”ë“œí¬ì¸íŠ¸) |
| Analysis API Routes | âœ… êµ¬í˜„ ì™„ë£Œ | ì˜í–¥ ë¶„ì„ ë° ê²€í†  (7ê°œ ì—”ë“œí¬ì¸íŠ¸) |
| Authentication API | âœ… êµ¬í˜„ ì™„ë£Œ | JWT ê¸°ë°˜ ì¸ì¦ (9ê°œ ì—”ë“œí¬ì¸íŠ¸) |
| Notifications API | âœ… êµ¬í˜„ ì™„ë£Œ | ì•Œë¦¼ ê´€ë¦¬ (8ê°œ ì—”ë“œí¬ì¸íŠ¸) |
| Search API | âœ… êµ¬í˜„ ì™„ë£Œ | ê²€ìƒ‰ ê¸°ëŠ¥ (8ê°œ ì—”ë“œí¬ì¸íŠ¸) |
| Notification Service | âœ… êµ¬í˜„ ì™„ë£Œ | ì´ë©”ì¼(SendGrid) + ì¸ì•± ì•Œë¦¼ |
| Database Integration | ğŸš§ ê°œë°œ ì˜ˆì • | ì‹¤ì œ PostgreSQL ì—°ê²° ë° CRUD |

---

## ğŸ“ ë¬¸ì˜

- **í”„ë¡œì íŠ¸ ë‹´ë‹¹**: AI Law Analysis Team
- **ê¸°ìˆ  ì§€ì›**: GitHub Issues
- **ì´ë©”ì¼**: support@example.go.kr

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

Copyright Â© 2024 AI ê¸°ë°˜ ìì¹˜ë²•ê·œ ì˜í–¥ ë¶„ì„ ì‹œìŠ¤í…œ. All rights reserved.

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2024-11-19  
**ë²„ì „**: 1.2.0 (Phase 2 ì™„ë£Œ - Complete API System with 70+ Endpoints)
